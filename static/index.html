<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Watchlist</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        h1 {
            color: #333;
            margin-bottom: 30px;
            text-align: center;
        }

        .section {
            margin-bottom: 30px;
        }

        .section h2 {
            color: #555;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #007bff;
        }

        .watchlist-container {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .watchlist-card {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 200px;
        }

        .watchlist-card:hover {
            border-color: #007bff;
            box-shadow: 0 4px 8px rgba(0,123,255,0.2);
        }

        .watchlist-card.active {
            background: #007bff;
            color: white;
            border-color: #0056b3;
        }

        .watchlist-card h3 {
            margin-bottom: 8px;
        }

        .watchlist-card p {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background-color: #0056b3;
        }

        .btn-danger {
            background-color: #dc3545;
        }

        .btn-danger:hover {
            background-color: #c82333;
        }

        .btn-secondary {
            background-color: #6c757d;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }

        input, select, textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #007bff;
            color: white;
            font-weight: 600;
            cursor: pointer;
            user-select: none;
        }

        th:hover {
            background-color: #0056b3;
        }

        tr:hover {
            background-color: #f8f9fa;
        }

        .stock-row {
            cursor: pointer;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 20px;
        }

        .close:hover {
            color: #000;
        }

        .filter-sort {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .filter-sort input,
        .filter-sort select {
            width: auto;
            min-width: 150px;
        }

        .actions {
            display: flex;
            gap: 10px;
        }

        .alert-item {
            background: #f8f9fa;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }

        .alert-item.inactive {
            opacity: 0.6;
            border-left-color: #6c757d;
        }

        #loading {
            text-align: center;
            padding: 20px;
            display: none;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #888;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä Stock Watchlist</h1>

        <!-- Watchlists Section -->
        <div class="section">
            <h2>Watchlists</h2>
            <div class="watchlist-container" id="watchlistContainer"></div>
            <button class="btn" onclick="showCreateWatchlistModal()">+ Neue Watchlist erstellen</button>
        </div>

        <!-- Stocks Table Section -->
        <div class="section" id="stocksSection" style="display: none;">
            <h2>Aktien in Watchlist: <span id="currentWatchlistName"></span></h2>
            
            <div class="filter-sort">
                <input type="text" id="filterInput" placeholder="Nach Name, ISIN oder Ticker filtern..." onkeyup="filterStocks()">
                <select id="sortSelect" onchange="sortStocks()">
                    <option value="">Sortieren nach...</option>
                    <option value="name">Name</option>
                    <option value="ticker_symbol">Ticker</option>
                    <option value="current_price">Aktueller Kurs</option>
                    <option value="country">Land</option>
                    <option value="sector">Sektor</option>
                </select>
                <select id="sortOrder" onchange="sortStocks()">
                    <option value="asc">Aufsteigend</option>
                    <option value="desc">Absteigend</option>
                </select>
            </div>

            <button class="btn" onclick="showAddStockModal()">+ Aktie hinzuf√ºgen</button>
            
            <div class="table-container">
                <table id="stocksTable">
                    <thead>
                        <tr>
                            <th onclick="sortByColumn('isin')">ISIN</th>
                            <th onclick="sortByColumn('ticker_symbol')">Ticker</th>
                            <th onclick="sortByColumn('name')">Name</th>
                            <th onclick="sortByColumn('current_price')">Kurs</th>
                            <th onclick="sortByColumn('country')">Land</th>
                            <th onclick="sortByColumn('industry')">Branche</th>
                            <th onclick="sortByColumn('sector')">Sektor</th>
                            <th onclick="sortByColumn('pe_ratio')">KGV</th>
                            <th onclick="sortByColumn('rsi')">RSI</th>
                            <th onclick="sortByColumn('volatility')">Volatilit√§t</th>
                            <th>Aktionen</th>
                        </tr>
                    </thead>
                    <tbody id="stocksTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Loading Indicator -->
    <div id="loading">
        <div class="spinner"></div>
        <p>Laden...</p>
    </div>

    <!-- Create Watchlist Modal -->
    <div id="createWatchlistModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('createWatchlistModal')">&times;</span>
            <h2>Neue Watchlist erstellen</h2>
            <form onsubmit="createWatchlist(event)">
                <div class="form-group">
                    <label>Name *</label>
                    <input type="text" id="watchlistName" required>
                </div>
                <div class="form-group">
                    <label>Beschreibung</label>
                    <textarea id="watchlistDescription"></textarea>
                </div>
                <button type="submit" class="btn">Erstellen</button>
            </form>
        </div>
    </div>

    <!-- Add Stock Modal -->
    <div id="addStockModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addStockModal')">&times;</span>
            <h2>Aktie hinzuf√ºgen</h2>
            <form onsubmit="addStock(event)">
                <div class="form-group">
                    <label>ISIN *</label>
                    <input type="text" id="stockIsin" required>
                </div>
                <div class="form-group">
                    <label>Ticker Symbol *</label>
                    <input type="text" id="stockTicker" required>
                </div>
                <div class="form-group">
                    <label>Name *</label>
                    <input type="text" id="stockName" required>
                </div>
                <div class="form-group">
                    <label>Land</label>
                    <input type="text" id="stockCountry">
                </div>
                <div class="form-group">
                    <label>Branche</label>
                    <input type="text" id="stockIndustry">
                </div>
                <div class="form-group">
                    <label>Sektor</label>
                    <input type="text" id="stockSector">
                </div>
                <button type="submit" class="btn">Hinzuf√ºgen</button>
            </form>
        </div>
    </div>

    <!-- Stock Detail Modal -->
    <div id="stockDetailModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('stockDetailModal')">&times;</span>
            <div id="stockDetailContent"></div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000';
        let currentWatchlistId = null;
        let allStocks = [];

        // Load watchlists on page load
        document.addEventListener('DOMContentLoaded', () => {
            loadWatchlists();
        });

        async function loadWatchlists() {
            try {
                showLoading();
                const response = await fetch(`${API_BASE}/watchlists/`);
                const watchlists = await response.json();
                
                const container = document.getElementById('watchlistContainer');
                if (watchlists.length === 0) {
                    container.innerHTML = '<div class="empty-state">Keine Watchlists vorhanden. Erstellen Sie eine neue Watchlist.</div>';
                } else {
                    container.innerHTML = watchlists.map(wl => `
                        <div class="watchlist-card" onclick="selectWatchlist(${wl.id}, '${wl.name}')">
                            <h3>${wl.name}</h3>
                            <p>${wl.description || 'Keine Beschreibung'}</p>
                        </div>
                    `).join('');
                }
                hideLoading();
            } catch (error) {
                console.error('Error loading watchlists:', error);
                hideLoading();
                alert('Fehler beim Laden der Watchlists');
            }
        }

        async function selectWatchlist(id, name) {
            currentWatchlistId = id;
            document.getElementById('currentWatchlistName').textContent = name;
            
            // Highlight selected watchlist
            document.querySelectorAll('.watchlist-card').forEach(card => {
                card.classList.remove('active');
            });
            event.target.closest('.watchlist-card').classList.add('active');
            
            // Show stocks section
            document.getElementById('stocksSection').style.display = 'block';
            
            // Load stocks
            await loadStocks();
        }

        async function loadStocks() {
            if (!currentWatchlistId) return;
            
            try {
                showLoading();
                const response = await fetch(`${API_BASE}/stocks/?watchlist_id=${currentWatchlistId}`);
                allStocks = await response.json();
                displayStocks(allStocks);
                hideLoading();
            } catch (error) {
                console.error('Error loading stocks:', error);
                hideLoading();
                alert('Fehler beim Laden der Aktien');
            }
        }

        function displayStocks(stocks) {
            const tbody = document.getElementById('stocksTableBody');
            
            if (stocks.length === 0) {
                tbody.innerHTML = '<tr><td colspan="11" class="empty-state">Keine Aktien in dieser Watchlist. F√ºgen Sie Aktien hinzu.</td></tr>';
                return;
            }
            
            tbody.innerHTML = stocks.map(stock => {
                const latestData = stock.latest_data || {};
                return `
                    <tr class="stock-row" onclick="showStockDetail(${stock.id})">
                        <td>${stock.isin}</td>
                        <td>${stock.ticker_symbol}</td>
                        <td>${stock.name}</td>
                        <td>${latestData.current_price ? latestData.current_price.toFixed(2) + ' ‚Ç¨' : '-'}</td>
                        <td>${stock.country || '-'}</td>
                        <td>${stock.industry || '-'}</td>
                        <td>${stock.sector || '-'}</td>
                        <td>${latestData.pe_ratio ? latestData.pe_ratio.toFixed(2) : '-'}</td>
                        <td>${latestData.rsi ? latestData.rsi.toFixed(2) : '-'}</td>
                        <td>${latestData.volatility ? latestData.volatility.toFixed(2) + '%' : '-'}</td>
                        <td>
                            <div class="actions" onclick="event.stopPropagation()">
                                <button class="btn btn-secondary" onclick="moveStock(${stock.id})">Verschieben</button>
                                <button class="btn btn-danger" onclick="deleteStock(${stock.id})">L√∂schen</button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function filterStocks() {
            const filterValue = document.getElementById('filterInput').value.toLowerCase();
            const filtered = allStocks.filter(stock => 
                stock.name.toLowerCase().includes(filterValue) ||
                stock.isin.toLowerCase().includes(filterValue) ||
                stock.ticker_symbol.toLowerCase().includes(filterValue)
            );
            displayStocks(filtered);
        }

        function sortStocks() {
            const sortBy = document.getElementById('sortSelect').value;
            const sortOrder = document.getElementById('sortOrder').value;
            
            if (!sortBy) {
                displayStocks(allStocks);
                return;
            }
            
            const sorted = [...allStocks].sort((a, b) => {
                let aVal = a[sortBy];
                let bVal = b[sortBy];
                
                // Handle nested latest_data fields
                if (sortBy === 'current_price' || sortBy === 'pe_ratio' || sortBy === 'rsi' || sortBy === 'volatility') {
                    aVal = a.latest_data?.[sortBy] || 0;
                    bVal = b.latest_data?.[sortBy] || 0;
                }
                
                if (aVal === null || aVal === undefined) return 1;
                if (bVal === null || bVal === undefined) return -1;
                
                if (typeof aVal === 'string') {
                    return sortOrder === 'asc' 
                        ? aVal.localeCompare(bVal)
                        : bVal.localeCompare(aVal);
                }
                
                return sortOrder === 'asc' ? aVal - bVal : bVal - aVal;
            });
            
            displayStocks(sorted);
        }

        async function showStockDetail(stockId) {
            try {
                showLoading();
                const [stockResponse, alertsResponse] = await Promise.all([
                    fetch(`${API_BASE}/stocks/${stockId}`),
                    fetch(`${API_BASE}/alerts/?stock_id=${stockId}`)
                ]);
                
                const stock = await stockResponse.json();
                const alerts = await alertsResponse.json();
                
                const latestData = stock.latest_data || {};
                
                const content = `
                    <h2>${stock.name}</h2>
                    <div style="margin: 20px 0;">
                        <p><strong>ISIN:</strong> ${stock.isin}</p>
                        <p><strong>Ticker:</strong> ${stock.ticker_symbol}</p>
                        <p><strong>Land:</strong> ${stock.country || '-'}</p>
                        <p><strong>Branche:</strong> ${stock.industry || '-'}</p>
                        <p><strong>Sektor:</strong> ${stock.sector || '-'}</p>
                    </div>
                    
                    <h3>Aktuelle Kennzahlen</h3>
                    <div style="margin: 20px 0;">
                        <p><strong>Kurs:</strong> ${latestData.current_price ? latestData.current_price.toFixed(2) + ' ‚Ç¨' : '-'}</p>
                        <p><strong>KGV:</strong> ${latestData.pe_ratio ? latestData.pe_ratio.toFixed(2) : '-'}</p>
                        <p><strong>RSI:</strong> ${latestData.rsi ? latestData.rsi.toFixed(2) : '-'}</p>
                        <p><strong>Volatilit√§t:</strong> ${latestData.volatility ? latestData.volatility.toFixed(2) + '%' : '-'}</p>
                    </div>
                    
                    <h3>Alarme</h3>
                    <div id="alertsList">
                        ${alerts.length === 0 
                            ? '<p>Keine Alarme vorhanden</p>'
                            : alerts.map(alert => `
                                <div class="alert-item ${alert.is_active ? '' : 'inactive'}">
                                    <strong>${alert.alert_type}</strong> ${alert.condition} ${alert.threshold_value}
                                    <span style="float: right;">
                                        <button class="btn btn-secondary" onclick="toggleAlert(${alert.id}, ${!alert.is_active})">
                                            ${alert.is_active ? 'Deaktivieren' : 'Aktivieren'}
                                        </button>
                                        <button class="btn btn-danger" onclick="deleteAlert(${alert.id})">L√∂schen</button>
                                    </span>
                                </div>
                            `).join('')
                        }
                    </div>
                    
                    <button class="btn" style="margin-top: 20px;" onclick="showCreateAlertForm(${stockId})">+ Alarm hinzuf√ºgen</button>
                    
                    <div id="createAlertForm" style="display: none; margin-top: 20px;">
                        <h4>Neuen Alarm erstellen</h4>
                        <form onsubmit="createAlert(event, ${stockId})">
                            <div class="form-group">
                                <label>Alarm-Typ</label>
                                <select id="alertType" required>
                                    <option value="price">Preis</option>
                                    <option value="pe_ratio">KGV</option>
                                    <option value="rsi">RSI</option>
                                    <option value="volatility">Volatilit√§t</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Bedingung</label>
                                <select id="alertCondition" required>
                                    <option value="above">√úber</option>
                                    <option value="below">Unter</option>
                                    <option value="equals">Gleich</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Schwellenwert</label>
                                <input type="number" step="0.01" id="alertThreshold" required>
                            </div>
                            <button type="submit" class="btn">Alarm erstellen</button>
                        </form>
                    </div>
                `;
                
                document.getElementById('stockDetailContent').innerHTML = content;
                document.getElementById('stockDetailModal').style.display = 'block';
                hideLoading();
            } catch (error) {
                console.error('Error loading stock details:', error);
                hideLoading();
                alert('Fehler beim Laden der Aktiendetails');
            }
        }

        function showCreateAlertForm(stockId) {
            document.getElementById('createAlertForm').style.display = 'block';
        }

        async function createAlert(event, stockId) {
            event.preventDefault();
            
            const alertData = {
                stock_id: stockId,
                alert_type: document.getElementById('alertType').value,
                condition: document.getElementById('alertCondition').value,
                threshold_value: parseFloat(document.getElementById('alertThreshold').value),
                is_active: true
            };
            
            try {
                showLoading();
                const response = await fetch(`${API_BASE}/alerts/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(alertData)
                });
                
                if (response.ok) {
                    hideLoading();
                    closeModal('stockDetailModal');
                    alert('Alarm erfolgreich erstellt!');
                    showStockDetail(stockId);
                } else {
                    throw new Error('Failed to create alert');
                }
            } catch (error) {
                console.error('Error creating alert:', error);
                hideLoading();
                alert('Fehler beim Erstellen des Alarms');
            }
        }

        async function toggleAlert(alertId, isActive) {
            try {
                showLoading();
                const response = await fetch(`${API_BASE}/alerts/${alertId}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ is_active: isActive })
                });
                
                if (response.ok) {
                    hideLoading();
                    const stockId = allStocks.find(s => s.alerts?.some(a => a.id === alertId))?.id;
                    if (stockId) showStockDetail(stockId);
                } else {
                    throw new Error('Failed to update alert');
                }
            } catch (error) {
                console.error('Error updating alert:', error);
                hideLoading();
                alert('Fehler beim Aktualisieren des Alarms');
            }
        }

        async function deleteAlert(alertId) {
            if (!confirm('M√∂chten Sie diesen Alarm wirklich l√∂schen?')) return;
            
            try {
                showLoading();
                const response = await fetch(`${API_BASE}/alerts/${alertId}`, {
                    method: 'DELETE'
                });
                
                if (response.ok) {
                    hideLoading();
                    closeModal('stockDetailModal');
                    alert('Alarm erfolgreich gel√∂scht!');
                } else {
                    throw new Error('Failed to delete alert');
                }
            } catch (error) {
                console.error('Error deleting alert:', error);
                hideLoading();
                alert('Fehler beim L√∂schen des Alarms');
            }
        }

        function showCreateWatchlistModal() {
            document.getElementById('createWatchlistModal').style.display = 'block';
        }

        function showAddStockModal() {
            if (!currentWatchlistId) {
                alert('Bitte w√§hlen Sie zuerst eine Watchlist aus');
                return;
            }
            document.getElementById('addStockModal').style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        async function createWatchlist(event) {
            event.preventDefault();
            
            const watchlistData = {
                name: document.getElementById('watchlistName').value,
                description: document.getElementById('watchlistDescription').value
            };
            
            try {
                showLoading();
                const response = await fetch(`${API_BASE}/watchlists/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(watchlistData)
                });
                
                if (response.ok) {
                    hideLoading();
                    closeModal('createWatchlistModal');
                    document.getElementById('watchlistName').value = '';
                    document.getElementById('watchlistDescription').value = '';
                    await loadWatchlists();
                    alert('Watchlist erfolgreich erstellt!');
                } else {
                    const error = await response.json();
                    throw new Error(error.detail || 'Failed to create watchlist');
                }
            } catch (error) {
                console.error('Error creating watchlist:', error);
                hideLoading();
                alert('Fehler beim Erstellen der Watchlist: ' + error.message);
            }
        }

        async function addStock(event) {
            event.preventDefault();
            
            const stockData = {
                watchlist_id: currentWatchlistId,
                isin: document.getElementById('stockIsin').value,
                ticker_symbol: document.getElementById('stockTicker').value,
                name: document.getElementById('stockName').value,
                country: document.getElementById('stockCountry').value || null,
                industry: document.getElementById('stockIndustry').value || null,
                sector: document.getElementById('stockSector').value || null
            };
            
            try {
                showLoading();
                const response = await fetch(`${API_BASE}/stocks/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(stockData)
                });
                
                if (response.ok) {
                    hideLoading();
                    closeModal('addStockModal');
                    event.target.reset();
                    await loadStocks();
                    alert('Aktie erfolgreich hinzugef√ºgt!');
                } else {
                    throw new Error('Failed to add stock');
                }
            } catch (error) {
                console.error('Error adding stock:', error);
                hideLoading();
                alert('Fehler beim Hinzuf√ºgen der Aktie');
            }
        }

        async function deleteStock(stockId) {
            if (!confirm('M√∂chten Sie diese Aktie wirklich l√∂schen?')) return;
            
            try {
                showLoading();
                const response = await fetch(`${API_BASE}/stocks/${stockId}`, {
                    method: 'DELETE'
                });
                
                if (response.ok) {
                    hideLoading();
                    await loadStocks();
                    alert('Aktie erfolgreich gel√∂scht!');
                } else {
                    throw new Error('Failed to delete stock');
                }
            } catch (error) {
                console.error('Error deleting stock:', error);
                hideLoading();
                alert('Fehler beim L√∂schen der Aktie');
            }
        }

        async function moveStock(stockId) {
            try {
                showLoading();
                const response = await fetch(`${API_BASE}/watchlists/`);
                const watchlists = await response.json();
                hideLoading();
                
                const targetWatchlistId = prompt(
                    'Watchlist-ID eingeben, zu der die Aktie verschoben werden soll:\n' +
                    watchlists.map(wl => `${wl.id}: ${wl.name}`).join('\n')
                );
                
                if (!targetWatchlistId) return;
                
                showLoading();
                const moveResponse = await fetch(`${API_BASE}/stocks/${stockId}/move`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ target_watchlist_id: parseInt(targetWatchlistId) })
                });
                
                if (moveResponse.ok) {
                    hideLoading();
                    await loadStocks();
                    alert('Aktie erfolgreich verschoben!');
                } else {
                    throw new Error('Failed to move stock');
                }
            } catch (error) {
                console.error('Error moving stock:', error);
                hideLoading();
                alert('Fehler beim Verschieben der Aktie');
            }
        }

        function showLoading() {
            document.getElementById('loading').style.display = 'block';
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }
    </script>
</body>
</html>
